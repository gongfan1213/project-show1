 **2D/3D 纹理生成与编辑系统**，主要用于纹理的创建、编辑、预览和管理。以下是对代码功能的详细分析：

---

## **功能概述**

### **1. 纹理的创建**
- **支持的纹理类型**：
  - **Color Texture**（彩色纹理）
  - **Gloss Texture**（光泽纹理）
  - **Color Relief**（彩色浮雕）
- **纹理生成**：
  - 用户可以上传图片，生成纹理或浮雕。
  - 支持调整纹理的厚度、对比度、反转等参数。
  - 生成的纹理可以直接添加到画布中。

---

### **2. 纹理的编辑**
- **参数调整**：
  - 支持调整纹理的厚度（Thickness）。
  - 支持调整纹理的平滑度（Smoothness/Contrast）。
  - 支持反转纹理（Invert）。
- **实时预览**：
  - 用户调整参数后，纹理的效果会实时更新。
  - 支持 2D 和 3D 视图切换。

---

### **3. 纹理的预览**
- **2D/3D 视图切换**：
  - 用户可以在 2D 和 3D 视图之间切换。
  - 3D 视图支持旋转体（如圆柱体）和平面纹理的预览。
- **法线图生成**：
  - 自动生成法线图，用于 3D 纹理的渲染。
- **多层纹理支持**：
  - 支持多层纹理的管理和切换。

---

### **4. 纹理的管理**
- **纹理库**：
  - 用户可以浏览和管理已有的纹理。
  - 支持分页加载和分类展示。
- **我的资产**：
  - 用户可以查看和管理自己创建的纹理。
  - 支持删除纹理。
- **纹理分类**：
  - 按照类型（如 Color Texture、Gloss Texture）和子分类（如 My Assets）进行管理。

---

### **5. 纹理的上传**
- **支持的文件类型**：
  - `.jpeg`, `.jpg`, `.png`, `.webp`, `.svg`。
- **上传方式**：
  - 支持文件选择上传和拖拽上传。
- **文件大小限制**：
  - 上传文件大小不得超过 50MB。
- **上传进度提示**：
  - 上传过程中显示加载动画。

---

### **6. 纹理的删除**
- **单个删除**：
  - 用户可以删除单个纹理。
- **批量删除**：
  - 支持批量删除纹理。
- **删除后更新**：
  - 删除纹理后，界面会自动更新，移除已删除的纹理。

---

### **7. 纹理的缓存**
- **缓存机制**：
  - 使用 `DataCache` 缓存纹理数据，避免重复请求。
  - 缓存包括纹理列表、分页信息、用户的操作状态等。
- **缓存更新**：
  - 用户创建或删除纹理后，缓存会自动更新。

---

### **8. 纹理的生成逻辑**
- **灰度图生成**：
  - 上传的图片会被转换为灰度图，用于生成纹理。
- **法线图生成**：
  - 通过灰度图生成法线图，用于 3D 渲染。
- **纹理参数**：
  - 纹理的生成依赖于用户设置的参数（如厚度、对比度、反转等）。
- **异步任务**：
  - 纹理生成是一个异步过程，支持轮询任务状态，直到生成完成。

---

### **9. 纹理的渲染**
- **2D 渲染**：
  - 使用 `TextureScene` 渲染 2D 纹理。
- **3D 渲染**：
  - 使用 `RotatingBodyScene` 渲染 3D 纹理。
  - 支持圆柱体等旋转体的纹理预览。
- **材质参数**：
  - 不同类型的纹理使用不同的材质参数（如 `cmykMaterialParams` 和 `glossMaterialParams`）。

---

### **10. 纹理的交互**
- **参数调整**：
  - 用户可以通过滑块（Slider）调整纹理的厚度和对比度。
  - 支持输入框直接输入数值。
- **图层管理**：
  - 支持多层纹理的管理，用户可以切换和编辑不同的纹理层。
- **拖拽交互**：
  - 支持拖拽文件到界面中进行上传。

---

## **实现细节**

### **1. 纹理生成**
- **灰度图生成**：
  - 使用 `TextureEffect2dManager` 的 `getCanvasGrayImgOf3dRelief` 方法生成灰度图。
- **法线图生成**：
  - 使用 `grayToNormalMap` 方法将灰度图转换为法线图。
- **纹理参数**：
  - 用户设置的参数（如厚度、对比度）会影响纹理的生成结果。

---

### **2. 纹理预览**
- **2D 预览**：
  - 使用 `TextureScene` 渲染 2D 纹理。
- **3D 预览**：
  - 使用 `RotatingBodyScene` 渲染 3D 纹理。
  - 支持旋转体（如圆柱体）的纹理预览。

---

### **3. 纹理管理**
- **分页加载**：
  - 使用 `getMyAssetsTextureList` 和 `getReliefMakerList` 方法分页加载纹理列表。
- **分类管理**：
  - 按照类型（如 Color Texture、Gloss Texture）和子分类（如 My Assets）进行管理。
- **删除纹理**：
  - 使用 `deleteTexture` 和 `deletRelief` 方法删除纹理。

---

### **4. 纹理上传**
- **文件选择上传**：
  - 使用 `input` 元素选择文件并上传。
- **拖拽上传**：
  - 监听 `onDrop` 事件，获取拖拽的文件并上传。
- **文件大小校验**：
  - 使用 `checkFileSize` 方法校验文件大小。

---

### **5. 纹理渲染**
- **材质参数**：
  - 不同类型的纹理使用不同的材质参数（如 `cmykMaterialParams` 和 `glossMaterialParams`）。
- **实时更新**：
  - 用户调整参数后，纹理会实时更新。

---

## **总结**

这段代码实现了一个功能强大的 **2D/3D 纹理生成与编辑系统**，主要功能包括：
1. **纹理的创建**：支持多种纹理类型的生成。
2. **纹理的编辑**：支持调整厚度、对比度、反转等参数。
3. **纹理的预览**：支持 2D 和 3D 视图切换。
4. **纹理的管理**：支持分页加载、分类管理和删除操作。
5. **纹理的上传**：支持文件选择上传和拖拽上传。
6. **纹理的渲染**：支持实时预览和多层纹理管理。
