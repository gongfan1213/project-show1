以下是 `MainUiLeftUpload` 组件的核心业务逻辑流程图，分为 **数据加载**、**用户操作**、**状态管理** 三个模块：

```mermaid
graph TD
  A[开始] --> B[初始化加载]
  B --> C{缓存有数据?}
  C -->|是| D[从缓存加载数据]
  C -->|否| E[请求API获取数据]
  E --> F[更新数据列表+缓存]
  F --> G[渲染列表]

  subgraph 用户操作模块
    H[点击上传按钮] --> I[选择本地文件]
    I --> J{文件合法?}
    J -->|是| K[重命名文件]
    K --> L[上传到OSS]
    L --> M[触发EventUpdateMaterial事件]
    M --> N[更新数据列表+缓存]

    O[点击素材项] --> P{是否编辑模式?}
    P -->|是| Q[切换勾选状态]
    P -->|否| R[导入到画布/返回上级]

    S[勾选操作] --> T{全选?}
    T -->|是| U[标记所有素材为选中]
    T -->|否| V[更新单个选中状态]

    W[删除操作] --> X{是否批量删除?}
    X -->|是| Y[弹窗确认删除]
    X -->|否| Y
    Y --> Z[调用删除API]
    Z --> AA[更新数据列表+缓存]
  end

  subgraph 状态管理模块
    AB[布局模式] --> AC{allRight_state?}
    AC -->|true| AD[Flex布局]
    AC -->|false| AE[Masonry瀑布流]

    AF[编辑模式] --> AG{isEditing状态}
    AG -->|开启| AH[显示勾选框]
    AG -->|关闭| AI[隐藏勾选框]

    AJ[拖拽上传] --> AK[监听drop事件]
    AK --> AL[文件校验+上传]
  end

  N --> G
  Q --> G
  R --> G
  V --> G
  AA --> G
  AL --> G
```

### 关键流程说明

---

#### **1. 数据加载流程**
```mermaid
graph LR
  A1[组件挂载] --> A2{检查缓存?}
  A2 -->|有数据| A3[读取缓存渲染]
  A2 -->|无数据| A4[发起API请求]
  A4 --> A5[分页加载数据]
  A5 --> A6[更新缓存]
  A6 --> A7[渲染列表]
```

---

#### **2. 文件上传流程**
```mermaid
graph TB
  B1[点击上传按钮] --> B2[选择文件]
  B2 --> B3[校验文件类型/大小]
  B3 -->|合法| B4[重命名文件]
  B4 --> B5[调用OSS上传]
  B5 --> B6[触发全局事件]
  B6 --> B7[插入数据到列表头部]
```

---

#### **3. 删除操作流程**
```mermaid
graph LR
  C1[选中素材] --> C2{点击删除}
  C2 --> C3[弹窗确认]
  C3 -->|确认| C4[调用删除API]
  C4 --> C5[更新数据列表]
  C5 --> C6[清空选中状态]
```

---

#### **4. 状态切换逻辑**
```mermaid
graph TB
  D1[布局模式] --> D2{allRight_state值}
  D2 -->|true| D3[固定尺寸Flex布局]
  D2 -->|false| D4[自适应瀑布流布局]

  D5[编辑模式] --> D6{是否进入编辑}
  D6 -->|是| D7[显示勾选框+底部操作栏]
  D6 -->|否| D8[隐藏操作UI]
```

---

#### **5. 数据缓存机制**
```mermaid
graph LR
  E1[首次加载] --> E2[数据存入缓存]
  E2 --> E3[后续操作]
  E3 --> E4[增删改数据]
  E4 --> E5[同步更新缓存]
  E5 --> E6[下次加载优先读缓存]
```

该流程图涵盖了组件的主要交互场景和状态变化逻辑，可结合代码中的以下核心函数理解：
- `getListData()`：数据加载
- `updateFile()`：文件上传
- `handleDeleteSelected()`：删除操作
- `handleSelectAll()`：全选逻辑
