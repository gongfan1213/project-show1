### 功能分析：Text模块

Text模块是一个复杂的React组件，主要用于在2D编辑器中管理和操作文字相关的功能。以下是对其功能的详细分析和总结：

---

### 1. **文字添加功能**
   - **添加标题（Headline）**
     - 提供一个按钮，点击后在画布上添加一个默认的标题文字。
     - 标题的默认样式包括字体大小、图层名称等。
     - 支持拖拽添加标题到画布。
   - **添加段落（Paragraph）**
     - 提供一个按钮，点击后在画布上添加一个默认的段落文字。
     - 段落的默认样式包括字体大小、宽度等。
     - 支持拖拽添加段落到画布。

---

### 2. **文字模板管理**
   - **文字模板分类**
     - 文字模板分为多个小类（如标题、段落等），每个小类包含多个文字模板。
     - 支持从CMS接口动态获取文字模板分类。
   - **文字模板展示**
     - 每个分类下展示对应的文字模板，模板以卡片形式显示，包含缩略图、规则信息等。
     - 支持分页加载，初始加载部分数据，滚动或点击“See All”时加载更多。
   - **文字模板收藏状态**
     - 支持获取文字模板的收藏状态，并在UI中显示。
     - 收藏状态通过接口动态获取，并与模板数据关联。

---

### 3. **文字模板操作**
   - **模板点击**
     - 点击文字模板后，将模板内容加载到画布中。
     - 支持通过网络请求加载模板的字体文件和样式。
   - **模板拖拽**
     - 支持将文字模板拖拽到画布中，完成添加操作。
   - **模板刷新**
     - 当某个分类数据加载失败时，提供刷新按钮重新加载数据。
   - **模板加载更多**
     - 支持横向滚动加载更多模板。
     - 支持点击“See All”进入全屏模式，加载更多模板。

---

### 4. **全屏模式**
   - **全屏展示**
     - 点击“See All”后，进入全屏模式，展示某个分类的所有文字模板。
     - 全屏模式下支持分页加载更多模板。
   - **返回功能**
     - 提供返回按钮，从全屏模式返回到普通模式。

---

### 5. **数据缓存与状态管理**
   - **数据缓存**
     - 使用`DataCache`类对文字模板数据进行缓存，减少重复请求。
     - 缓存包括分类数据、模板数据、分页信息等。
   - **状态管理**
     - 使用`useState`和`useRef`管理组件的状态，如加载状态、分页信息、当前分类等。
     - 使用`useEffect`监听状态变化并触发相应的操作。

---

### 6. **接口请求与数据处理**
   - **接口请求**
     - 从CMS接口获取文字模板分类和模板数据。
     - 支持分页请求，动态加载更多数据。
   - **数据处理**
     - 对接口返回的数据进行格式化处理，提取模板的缩略图、字体文件、规则信息等。
     - 动态更新模板的收藏状态。
   - **错误处理**
     - 当接口请求失败时，显示错误提示，并提供刷新按钮重新加载数据。

---

### 7. **UI交互与动画**
   - **加载动画**
     - 在数据加载过程中显示加载动画。
   - **空数据提示**
     - 当某个分类没有数据时，显示空数据提示。
   - **滚动交互**
     - 支持横向滚动查看模板，滚动到边界时显示左右滚动按钮。
   - **拖拽交互**
     - 支持拖拽文字模板到画布中。

---

### 8. **国际化支持**
   - 使用`useTranslation`和`useCustomTranslation`实现国际化。
   - 所有UI文本支持多语言切换。

---

### 9. **埋点与统计**
   - **用户行为埋点**
     - 点击文字模板时，触发埋点事件，记录用户行为。
   - **统计数据**
     - 通过`StatisticalReportManager`记录用户操作的统计数据。

---

### 10. **错误处理与恢复**
   - **错误提示**
     - 当接口请求失败时，显示错误提示。
   - **刷新功能**
     - 提供刷新按钮，重新加载失败的数据。

---

### 功能要点总结
1. **文字添加功能**：支持添加标题和段落，支持拖拽操作。
2. **文字模板管理**：分类展示文字模板，支持分页加载和收藏状态显示。
3. **文字模板操作**：支持点击、拖拽、刷新、加载更多等操作。
4. **全屏模式**：支持全屏展示某个分类的所有模板，并加载更多。
5. **数据缓存与状态管理**：使用缓存减少重复请求，管理加载状态和分页信息。
6. **接口请求与数据处理**：从CMS接口获取数据，动态更新收藏状态。
7. **UI交互与动画**：支持加载动画、空数据提示、滚动交互、拖拽交互。
8. **国际化支持**：支持多语言切换。
9. **埋点与统计**：记录用户行为和操作统计数据。
10. **错误处理与恢复**：显示错误提示，提供刷新功能。

---

### 总结
Text模块是一个功能丰富的文字管理组件，集成了文字添加、模板管理、全屏展示、数据缓存、国际化、埋点统计等多种功能，适用于复杂的2D编辑器场景。
